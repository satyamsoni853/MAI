<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Why Traders Choose MAI - Staggered, No-Slide Switcher</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <style>
      * {
        box-sizing: border-box;
      }

      body,
      html {
        margin: 0;
        padding: 0;
        overflow-x: hidden !important;
        width: 100%;
        max-width: 100vw;
      }

      .traders-section {
        padding: 80px 0;
        background-color: #f7f7f7;
        overflow-x: hidden !important;
        width: 100%;
        max-width: 100vw;
      }

      .container {
        max-width: 1600px;
        margin: 0 auto;
        padding: 0 20px;
        text-align: center;
        overflow-x: hidden !important;
        width: 100%;
        max-width: 100%;
      }
      .section-title {
        font-size: 3.5rem;
        font-weight: 700;
        color: #1a1a1a;
        margin-bottom: 16px;
      }
      .info-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 28px;
        height: 28px;
        border: 0.5px solid black;
        color: black;
        border-radius: 50%;
        font-size: 16px;
        font-weight: bold;
        margin-left: 10px;
        cursor: help;
        vertical-align: middle;
        position: relative;
        top: -2px;
      }
      .section-text {
        max-width: 1400px;
        margin: 0 auto 60px;
        font-size: 1.4rem;
        color: #555;
        line-height: 1.7;
      }

      /* Container for the 5 cards */
      .carousel-wrapper {
        position: relative;
        margin: 0 auto;
        width: 100%;
        max-width: 100vw;
        overflow-x: hidden;
        box-sizing: border-box;
      }

      /* The row of cards */
      .carousel-track {
        display: flex;
        justify-content: center; /* Center the group of cards */
        gap: 32px;
        padding: 120px 0 180px;
        margin: 0 auto;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
        overflow-x: visible;
      }

      .trader-card {
        min-width: 290px;
        max-width: 290px;
        height: 400px;
        border-radius: 32px;
        overflow: hidden;
        position: relative;
        flex-shrink: 1;
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.18);
        opacity: 1;
      }

      /* Image container with flip effect */
      .trader-card {
        transition: transform 0.6s;
        transform-style: preserve-3d;
      }

      .trader-card .card-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: opacity 0.4s ease-in-out;
      }

      /* Flip animation classes */
      .trader-card.flipping {
        animation: cardFlip 0.6s ease-in-out;
      }

      @keyframes cardFlip {
        0% {
          transform: rotateY(0deg) scale(1);
        }
        50% {
          transform: rotateY(90deg) scale(0.95);
        }
        100% {
          transform: rotateY(0deg) scale(1);
        }
      }

      .trader-card.fading .card-img,
      .trader-card.fading .overlay {
        opacity: 0;
      }

      .trader-card:hover .card-img {
        transform: scale(1.08);
      }
      .overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
        color: white;
        padding: 70px 24px 30px;
        text-align: center;
      }
      .overlay h3 {
        font-size: 1.55rem;
        font-weight: 600;
        margin-bottom: 8px;
      }
      .overlay p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      /* --- STAGGERED Vertical positioning classes (Restored) --- */
      .lower-card {
        transform: translateY(180px);
      }
      .upper-card {
        transform: translateY(80px);
      }
      .middle-card {
        transform: translateY(0);
      }

      /* --- Navigation Button Styles --- */

      .nav-buttons {
        display: flex;
        position: relative;
        top: -100px;
        justify-content: center;
        gap: 20px;
        margin: 40px 0 80px;
      }
      .nav-btn {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: white;
        border: none;
        font-size: 1.6rem;
        color: #555;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
        z-index: 10;
      }
      .nav-btn:hover:not(:disabled) {
        background: #0d47a1;
        color: white;
        transform: scale(1.1);
      }
      .nav-btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none;
      }

      .view-all {
        margin-top: -50px;
      }
      .btn-primary {
        display: inline-block;
        background: #0d47a1;
        position: relative;
        top: -100px;
        color: white;
        padding: 20px 50px;
        border-radius: 20px;
        font-size: 1.2rem;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s ease;
        box-shadow: 0 8px 25px rgba(13, 71, 161, 0.3);
      }
      .btn-primary:hover {
        background: #1565c0;
        transform: translateY(-4px);
      }

      /* --- Media Queries --- */
      @media (max-width: 1650px) {
        .carousel-track {
          justify-content: flex-start;
          gap: 24px;
        }

        .trader-card {
          min-width: 270px;
          max-width: 270px;
        }
      }

      @media (max-width: 1500px) {
        .carousel-track {
          gap: 20px;
        }

        .trader-card {
          min-width: 260px;
          max-width: 260px;
        }
      }
      @media (max-width: 992px) {
        .lower-card {
          transform: translateY(140px);
        }
        .upper-card {
          transform: translateY(60px);
        }
        .trader-card {
          min-width: 270px;
        }
      }
      @media (max-width: 768px) {
        .lower-card {
          transform: translateY(100px);
        }
        .upper-card {
          transform: translateY(40px);
        }
        .trader-card {
          min-width: 250px;
        }
        .carousel-track {
          gap: 20px;
        }
      }
      @media (max-width: 500px) {
        .carousel-track {
          justify-content: center;
          overflow-x: hidden;
        }
      }
    </style>
  </head>
  <body>
    <section class="traders-section">
      <div class="container">
        <h2 class="section-title">
          Traders - Why Traders Choose MAI
          <span class="info-icon">?</span>
        </h2>
        <p class="section-text">
          MAI upholds high standards by thoroughly vetting all Traders, ensuring only top
          professionals are featured. Traders enjoy consistent inquiries, effective communication,
          and tools to enhance credibility and showcase their work. With MAI, they expand client
          base and manage Projects efficiently.
        </p>

        <div class="carousel-wrapper">
          <div class="carousel-track" id="carouselTrack"></div>
        </div>

        <div class="nav-buttons">
          <button class="nav-btn prev-btn" id="prevBtn">
            <i class="fas fa-chevron-left"></i>
          </button>
          <button class="nav-btn next-btn" id="nextBtn">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>

        <div class="view-all">
          <a href="#" class="btn-primary">View All Trader</a>
        </div>
      </div>
    </section>

    <script>
      // === TRADER DATA (No position property - positions are fixed by card index) ===
      const tradersData = [
        {
          name: "Robert Fox",
          location: "Birmingham",
          img: "../../Task%20Images/Fifth%20Section/construction-industry-workers-1.png",
        },
        {
          name: "Marvin McKinney",
          location: "Greater London",
          img: "../../Task%20Images/Fifth%20Section/construction-industry-workers.png",
        },
        {
          name: "Guy Hawkins",
          location: "Birmingham",
          img: "../../Task%20Images/Fifth%20Section/handsome-business-man-engineer-hard-hat-building-1.png",
        },
        {
          name: "Jane Cooper",
          location: "Greater London",
          img: "../../Task%20Images/Fifth%20Section/handsome-business-man-engineer-hard-hat-building.png",
        },
        {
          name: "Ronald Richards",
          location: "Birmingham",
          img: "../../Task%20Images/Fifth%20Section/male-construction-worker-standing-with-safty-hat-hand-crossed.png",
        },
        {
          name: "Esther Howard",
          location: "Manchester",
          img: "../../Task%20Images/Fifth%20Section/construction-industry-workers-1.png",
        },
        {
          name: "Cameron Williamson",
          location: "Leeds",
          img: "../../Task%20Images/Fifth%20Section/handsome-business-man-engineer-hard-hat-building.png",
        },
        {
          name: "Brooklyn Simmons",
          location: "Liverpool",
          img: "../../Task%20Images/Fifth%20Section/handsome-business-man-engineer-hard-hat-building-1.png",
        },
        {
          name: "Another Trader",
          location: "Coventry",
          img: "../../Task%20Images/Fifth%20Section/construction-industry-workers.png",
        },
      ];

      // Fixed position pattern for the 5 cards (never changes)
      const cardPositions = ["lower-card", "upper-card", "middle-card", "upper-card", "lower-card"];

      // === JavaScript Logic: Keeps Card Position, Only Changes Content ===
      document.addEventListener("DOMContentLoaded", () => {
        const track = document.getElementById("carouselTrack");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");

        const VISIBLE_CARDS = 5;
        let startIndex = 0;

        // 1. Initial Card Element Creation (Creates 5 visible cards with fixed positions)
        for (let i = 0; i < VISIBLE_CARDS; i++) {
          const card = document.createElement("div");
          // Apply fixed position class that never changes
          card.className = `trader-card card-${i} ${cardPositions[i]}`;
          card.innerHTML = `
                    <img class="card-img" src="" alt="">
                    <div class="overlay">
                        <h3 class="card-name"></h3>
                        <p class="card-location"></p>
                    </div>
                `;
          track.appendChild(card);
        }

        const cardElements = Array.from(track.children);

        // 2. Function to update the content of the 5 visible cards with flip effect
        const updateCardContent = (newStartIndex, direction) => {
          // Bounds check
          if (newStartIndex < 0 || newStartIndex > tradersData.length - VISIBLE_CARDS) {
            return;
          }

          // Apply flip animation to all cards with staggered timing
          cardElements.forEach((card, index) => {
            setTimeout(() => {
              // Add fading class to fade out content
              card.classList.add("fading");

              // After fade out, flip the card
              setTimeout(() => {
                card.classList.add("flipping");

                // Update content at the midpoint of the flip (when card is perpendicular)
                setTimeout(() => {
                  const dataIndex = newStartIndex + index;
                  const data = tradersData[dataIndex];

                  // Set NEW Content (Image, Name, Location)
                  card.querySelector(".card-img").src = data.img;
                  card.querySelector(".card-name").textContent = data.name;
                  card.querySelector(".card-location").textContent = data.location;

                  // Keep the fixed position class - DON'T change card alignment
                  card.className = `trader-card card-${index} ${cardPositions[index]}`;
                }, 300); // Halfway through the flip animation

                // Remove animation classes after flip completes
                setTimeout(() => {
                  card.classList.remove("flipping", "fading");
                }, 600);
              }, 200); // Small delay after fade out
            }, index * 100); // Stagger each card by 100ms
          });

          startIndex = newStartIndex;

          // Update buttons after all animations complete
          setTimeout(() => {
            updateButtons();
          }, VISIBLE_CARDS * 100 + 800);
        };

        // 3. Update Buttons function (Disables arrows when limits are reached)
        const updateButtons = () => {
          prevBtn.disabled = startIndex === 0;
          nextBtn.disabled = startIndex >= tradersData.length - VISIBLE_CARDS;
        };

        // 4. Navigation Button Handlers
        nextBtn.addEventListener("click", () => {
          if (startIndex < tradersData.length - VISIBLE_CARDS) {
            updateCardContent(startIndex + 1, "next");
          }
        });

        prevBtn.addEventListener("click", () => {
          if (startIndex > 0) {
            updateCardContent(startIndex - 1, "prev");
          }
        });

        // Initial load of the first 5 cards (no animation on first load)
        const initialLoad = () => {
          for (let i = 0; i < VISIBLE_CARDS; i++) {
            const dataIndex = startIndex + i;
            const data = tradersData[dataIndex];
            const card = cardElements[i];

            card.querySelector(".card-img").src = data.img;
            card.querySelector(".card-name").textContent = data.name;
            card.querySelector(".card-location").textContent = data.location;
            // Position is already set during card creation, no need to change it
          }
          updateButtons();
        };

        initialLoad();
      });
    </script>
  </body>
</html>
