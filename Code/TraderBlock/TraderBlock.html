<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      MAI Role Selector Section - Hover to Expand
    </title>
    <style>
      /* ---------------------------------------------------- */
      /* --- 1. Base Styles and Reset --- */
      /* ---------------------------------------------------- */
      body,
      html {
        margin: 0;
        padding: 0;
      
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 20px;
      }

      /* ---------------------------------------------------- */
      /* --- 2. Header Styling (Unchanged) --- */
      /* ---------------------------------------------------- */
      .header-section {
        text-align: center;
        margin-bottom: 4rem;
      }

      .main-title {
        font-size: 2.5rem;
        font-weight: 800;
        color: #1f2937;
        line-height: 1.25;
      }

      .main-subtitle {
        margin-top: 1rem;
        max-width: 896px;
        margin-left: auto;
        margin-right: auto;
        font-size: 1.125rem;
        color: #4b5563;
      }

      @media (min-width: 640px) {
        .main-title {
          font-size: 3rem;
        }
      }
      @media (min-width: 1024px) {
        .main-title {
          font-size: 3.5rem;
        }
      }

      /* ---------------------------------------------------- */
      /* --- 3. Role Selector Container & Base Cards --- */
      /* ---------------------------------------------------- */
      .role-selector {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        max-width: 100%;
        margin: 0 auto;
      }

      /* Role Card Base Styles */
      .role-card {
        position: relative;
        padding: 0;
        transition: all 0.3s ease-in-out;
        cursor: pointer;
        border-radius: 1.5rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        transform: scale(1);
        height: 200px;
        display: flex;
        flex-direction: column;
      }

      /* INACTIVE Card Styles */
      .role-card:not(.active) {
        background-color: #0c2d71;
        color: white;
        flex-shrink: 0;
      }

      /* ACTIVE Card Styles (Used for sticky state on mobile or initial state) */
      .role-card.active {
        background-color: #0c399b;
        background-image: linear-gradient(135deg, #0c399b 0%, #1e58c0 100%);
        color: white;
        height: 600px;
      }

      /* Desktop Styles (min-width: 768px) */
      @media (min-width: 768px) {
        .role-selector {
          flex-direction: row;
          height: 600px;
        }

        .role-card {
          height: 100%;
          width: 20%;
        }

        /* CORE LOGIC */

        /* If a card is active (from mobile click), it maintains size */
        .role-card.active {
          width: 60%;
        }
        /* HOVERED card expands and gets the active styling */
        .role-card:hover {
          width: 60%;
          background-color: #0c399b;
          background-image: linear-gradient(135deg, #0c399b 0%, #1e58c0 100%);
        }

        /* NON-ACTIVE, NON-HOVERED cards shrink */
        .role-selector:hover .role-card:not(:hover) {
          width: 20%;
          background-color: #0c2d71;
          background-image: none;
        }
        
        /* If a card is active AND we are hovering over a different card, the active card shrinks */
        .role-selector:hover .role-card.active:not(:hover) {
            width: 20%;
            background-color: #0c2d71;
            background-image: none;
        }
      }

      /* --- 4. Inactive Card Content (Vertical Bar) --- */
      .vertical-text-container {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        transition: opacity 0.3s;
        
        z-index: 15;
      }

      .vertical-title {
        font-size: 2.1rem; /* Smaller heading size */
        font-weight: 700;
        position: relative;
        top: -160px;
        left: -100px;

        transform: rotate(-90deg);
        white-space: nowrap;
        letter-spacing: 0.1em;
        color: rgba(255, 255, 255, 0.9);
        padding: 0 5px;
        box-sizing: border-box;
      }

      /* Hide vertical text when card is wide (active/hovered) */
      .role-card.active .vertical-text-container {
        opacity: 0;
        pointer-events: none;
      }
      @media (min-width: 768px) {
        .role-card:hover .vertical-text-container {
          opacity: 0;
          pointer-events: none;
        }
        .role-selector:hover .role-card:not(:hover) .vertical-text-container {
          opacity: 1;
          pointer-events: auto;
        }
      }
      /* Mobile: Always hide vertical text on tall mobile cards */
      @media (max-width: 767px) {
        .role-card .vertical-text-container {
          display: none;
        }
      }

      /* --- 5. Image Peek Container (Image on narrow card) --- */
      .image-peek-container {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 50%;
        overflow: hidden;

        transition: opacity 0.3s;
        z-index: 10;
        border-radius: 0 0 1.5rem 1.5rem;
      }

      .image-peek-container img {
        position: absolute;
        bottom: 0;
        left: 50%;
        /* Fix to show full image */
        transform: translateX(-50%);
        height: auto; 
        max-height: 100%; 
        width: auto;
        max-width: none;
        object-fit: contain; 
        
        opacity: 1;
        transition: opacity 0.3s;
        border-radius: 0 0 1.5rem 1.5rem;
      }

      /* This hides the narrow image when the card expands (active/hovered) */
      .role-card.active .image-peek-container {
        opacity: 0;
      }
      @media (min-width: 768px) {
        .role-card:hover .image-peek-container {
          opacity: 0;
        }
        .role-card.active:not(:hover) .image-peek-container {
          /* If an active card isn't hovered, it should still show content, 
             but since we are forcing non-hovered cards to shrink on desktop 
             (in the core logic), we should keep it hidden. */
          opacity: 0;
        }
      }

      /* --- 6. Active/Hovered Card Content (Wide Panel) --- */
      .content-area {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        gap: 2rem;
        padding: 3rem;
        position: relative;
        z-index: 10;
        flex-grow: 1;

        /* Default hidden state */
        opacity: 0;
        transition: opacity 0.3s 0.2s;
        pointer-events: none;
      }

      /* Mobile layout adjustment */
      @media (max-width: 767px) {
        .content-area {
          flex-direction: column;
          padding: 2rem 1.5rem;
        }
      }

      /* Show content when active (mobile click) */
      .role-card.active .content-area {
        opacity: 1;
        pointer-events: auto;
      }
      /* Show content when hovered (DESKTOP) */
      @media (min-width: 768px) {
        .role-card:hover .content-area {
          opacity: 1;
          pointer-events: auto;
        }
      }

      /* Text Block Styling */
      .text-block {
        max-width: 500px;
        flex-shrink: 0;
      }

      .active-title {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
      }

      .description-box {
        background-color: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(5px);
        padding: 2rem;
        border-radius: 0.75rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        margin-bottom: 2.5rem;
      }

      .description-text {
        color: white;
        font-size: 1.125rem;
        line-height: 1.75;
      }

      .button-group {
        display: flex;
        flex-direction: row;
        gap: 1rem;
      }

      .button {
        font-weight: 600;
        padding: 0.75rem 1.5rem;
        border-radius: 9999px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -2px rgba(0, 0, 0, 0.06);
        border: none;
        cursor: pointer;
        text-wrap: nowrap;
      }

      .main-button {
        background-color: #5d9ddb;
        color: white;
      }

      .secondary-button {
        background-color: white;
        color: #1f2937;
      }

      /* --- 7. Active Image Container (Image inside the wide card) --- */
      .active-image-container {
        position: relative;
        height: 100%;
        width: 300px;
        overflow: hidden;
      }

      .active-image-container img {
        position: absolute;
        bottom: 0;
        right: -20px;
        height: 300px;
        width: auto;
        object-fit: cover;
        border-radius: 1.5rem;
      }

      /* Hide the image container on mobile, as it will stack poorly */
      @media (max-width: 767px) {
        .active-image-container {
          display: none;
        }
      }

      /* --- 8. Background Image Container (For subtle wide card background graphics) --- */
      .image-background-container {
        position: absolute;
        inset: 0;
        z-index: 0;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
      }

      .background-shape {
        position: absolute;
        top: 20%;
        right: 15%;
        width: 12rem;
        height: 12rem;
        opacity: 0.1;
        color: white;
        /* HIDE THE SVG by default */
        display: none; 
        transition: opacity 0.3s ease;
      }

      @media (min-width: 768px) {
        /* Show the SVG only when the card is hovered OR when it is the active card */
        .role-card:hover .background-shape,
        .role-card.active .background-shape {
          display: block; 
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div>
        <section class="header-section">
          <h1 class="main-title">
            MAI Leading Innovation in Construction & Property Improvement
          </h1>
          <p class="main-subtitle">
            MAI stands at the forefront of innovation in construction and
            property improvement, hosting a wide range of Projects from painting
            and furnishing to bathroom upscaling, kitchen remodelling, stone
            worktop installations, and more.
          </p>
        </section>

        <main id="role-selector" class="role-selector"></main>
      </div>
    </div>

    <script>
      // --- Data Model - USING SAME IMAGE PATH FOR BOTH VIEWS ---
      const rolesData = [
        {
          id: "trader",
          title: "Trader",
          description:
            "Register now to find trusted home services and verified traders for free online. With MAI, you get full project transparency from start to finish. Use advanced filters to make faster, smarter decisions.",
          image_url: "../../Task%20Images/Fouth%20Section/Intern.png", // Main image path
          alt: "A man in a hard hat and vest, representing a Trader (narrow view).",
          active_alt:
            "A man in a hard hat and vest, representing a Trader (wide view).", // Same image, different context
        },
        {
          id: "project-owner",
          title: "Project Owner",
          description:
            "Register now to find trusted home services and verified traders for free online. With MAI, you get full project transparency from start to finish. Use advanced filters to make faster, smarter decisions.",
          image_url: "../../Task%20Images/Fouth%20Section/Project%20Owner.png", // Main image path
          alt: "A man holding a coffee cup, representing a Project Owner (narrow view).",
          active_alt:
            "A man holding a coffee cup, representing a Project Owner (wide view).", // Same image, different context
        },
        {
          id: "intern",
          title: "Intern",
          description:
            "Register now to find trusted home services and verified traders for free online. With MAI, you get full project transparency from start to finish. Use advanced filters to make faster, smarter decisions.",
          image_url: "../../Task%20Images/Fouth%20Section/Trader.png", // Main image path
          alt: "A man in a hard hat and vest, representing an Intern (narrow view).",
          active_alt:
            "A construction worker representing an Intern (wide view).", // Same image, different context
        },
      ];

      // MODIFIED: Start with no active role initially (Desktop will rely purely on hover)
      let activeRole = null;
      const roleSelector = document.getElementById("role-selector");

      // Function to return an SVG based on the role ID (for subtle background icons)
      function getRoleIconSVG(roleId) {
        switch (roleId) {
          case "project-owner":
            return `<svg class="background-shape" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>`;
          case "trader":
            return `<svg class="background-shape" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 10h-2V7c0-1.65-1.35-3-3-3s-3 1.35-3 3v3H7c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-7c0-1.1-.9-2-2-2zm-5-4c.55 0 1 .45 1 1v3h-2V7c0-.55.45-1 1-1z"/></svg>`;
          case "intern":
            return `<svg class="background-shape" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g transform="scale(1.2) translate(-3, -3)"><path d="M19.4 12.5l-2.78-2.78c-.44-.44-.44-1.15 0-1.59l3.52-3.52c.3-.3.47-.7.47-1.13S20.47 2.7 20.17 2.4l-1.42-1.42c-.3-.3-.7-.47-1.13-.47s-.83.17-1.13.47l-3.52 3.52c-.44.44-1.15.44-1.59 0L9.5 2.58C9.06 2.14 8.35 2.14 7.91 2.58L.47 10.02c-.3.3-.47.7-.47 1.13s.17.83.47 1.13l7.44 7.44c.44.44 1.15.44 1.59 0l7.44-7.44c.44-.44.44-1.15 0-1.59zM9.5 13.5l-2-2 4-4 2 2-4 4z"/><circle cx="18" cy="18" r="4" opacity="0.5"/></g></svg>`;
          default:
            return "";
        }
      }

      // --- Core Render Function ---
      function renderRoles() {
        if (!roleSelector) return;

        roleSelector.innerHTML = "";

        rolesData.forEach((role) => {
          // isActive is now only true if explicitly set (e.g., via mobile click)
          const isActive = role.id === activeRole;
          const card = document.createElement("div");

          card.className = `role-card ${isActive ? "active" : ""}`;
          card.id = `card-${role.id}`;

          let mainButtonText;
          if (role.id === "project-owner") {
            mainButtonText = "View All Project Owners";
          } else if (role.id === "trader") {
            mainButtonText = "View All Trader";
          } else {
            mainButtonText = "View All Intern";
          }

          // --- Card Content ---
          let activeContentHTML = `
                    <div class="image-background-container">
                        ${getRoleIconSVG(role.id)}
                    </div>
                    
                    <div class="content-area">
                        <div class="text-block">
                            <h2 class="active-title">${role.title}</h2>
                            <div class="description-box">
                                <p class="description-text">${
                                  role.description
                                }</p>
                            </div>
                            <div class="button-group">
                                <button class="button main-button">${mainButtonText}</button>
                                <button class="button secondary-button">How Its Works</button>
                            </div>
                        </div>
                        
                        <div class="active-image-container">
                             <img src="${role.image_url}" alt="${
                               role.active_alt
                             }" onerror="this.onerror=null;this.src='https://placehold.co/300x600/1e58c0/ffffff?text=Active+Image+Load+Failed';">
                        </div>
                    </div>
                `;

          let inactiveContentHTML = `
                    <div class="vertical-text-container">
                        <h2 class="vertical-title">${role.title}</h2>
                    </div>

                    <div class="image-peek-container">
                        <img src="${role.image_url}" alt="${role.alt}" onerror="this.onerror=null;this.src='https://placehold.co/300x400/333333/ffffff?text=Image+Load+Failed';">
                    </div>
                `;

          card.innerHTML = inactiveContentHTML + activeContentHTML;

          // --- Event Listener (Kept for Mobile Click to Sticky State) ---
          card.addEventListener("click", () => {
            setActiveRole(role.id);
          });

          roleSelector.appendChild(card);
        });
      }

      // --- State Management and Update Function (Kept for mobile click) ---
      function setActiveRole(roleId) {
        // Only update 'activeRole' state on small screens (mobile/tablet)
        if (window.innerWidth < 768) {
          // If clicking the current active role, deactivate it (optional: makes it a toggle)
          if (activeRole === roleId) {
            activeRole = null;
          } else {
            activeRole = roleId;
          }
          
          renderRoles();

          // Scrolls to the top of the selector section on mobile click
          roleSelector.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      }

      document.addEventListener("DOMContentLoaded", renderRoles);
      window.addEventListener("resize", renderRoles);
    </script>
  </body>
</html>